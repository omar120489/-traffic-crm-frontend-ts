{"version":3,"file":"leads.sdk-UZu3Uvt3.js","sources":["../../src/services/leads.sdk.ts"],"sourcesContent":["import { api } from '@/data/clients/sdk';\nimport { getAttributionPayload, markAttributionSent } from '@/utils/attribution';\nimport type {\n  Lead,\n  LeadCreateDto,\n  LeadQuery,\n  LeadUpdateDto,\n  PaginatedLeads,\n  UUID,\n  ApiResponse,\n} from '@shared-types';\n\nexport async function listLeads(query?: LeadQuery): Promise<PaginatedLeads> {\n  return api.listLeads(query);\n}\n\nexport async function getLead(id: UUID): Promise<Lead> {\n  return api.getLead(id);\n}\n\nexport async function createLead(payload: LeadCreateDto): Promise<Lead> {\n  // Preserve attribution tracking logic\n  const attribution = getAttributionPayload();\n  const finalPayload = attribution ? { ...payload, attribution } : payload;\n\n  const response = await api.createLead(finalPayload);\n\n  if (attribution) {\n    markAttributionSent();\n    if (import.meta.env.DEV) {\n      console.log('[Attribution] Sent with lead:', {\n        leadId: response.id,\n        uti: attribution.uti,\n        utm_source: attribution.utm?.source,\n        ad_id: attribution.platform?.ad_id,\n      });\n    }\n  }\n\n  return response;\n}\n\nexport async function updateLead(id: UUID, payload: LeadUpdateDto): Promise<Lead> {\n  return api.updateLead(id, payload);\n}\n\nexport async function deleteLead(id: UUID): Promise<ApiResponse<void>> {\n  return api.deleteLead(id);\n}\n\nexport const leadsApi = {\n  listLeads,\n  getLead,\n  createLead,\n  updateLead,\n  deleteLead,\n};\n\n"],"names":["listLeads","query","api","getLead","id","createLead","payload","attribution","getAttributionPayload","finalPayload","response","markAttributionSent","updateLead","deleteLead","leadsApi"],"mappings":"sFAYA,eAAsBA,EAAUC,EAA4C,CAC1E,OAAOC,EAAI,UAAUD,CAAK,CAC5B,CAEA,eAAsBE,EAAQC,EAAyB,CACrD,OAAOF,EAAI,QAAQE,CAAE,CACvB,CAEA,eAAsBC,EAAWC,EAAuC,CAEtE,MAAMC,EAAcC,EAAA,EACdC,EAAeF,EAAc,CAAE,GAAGD,EAAS,YAAAC,GAAgBD,EAE3DI,EAAW,MAAMR,EAAI,WAAWO,CAAY,EAElD,OAAIF,GACFI,EAAA,EAWKD,CACT,CAEA,eAAsBE,EAAWR,EAAUE,EAAuC,CAChF,OAAOJ,EAAI,WAAWE,EAAIE,CAAO,CACnC,CAEA,eAAsBO,EAAWT,EAAsC,CACrE,OAAOF,EAAI,WAAWE,CAAE,CAC1B,CAEO,MAAMU,EAAW,CACtB,UAAAd,EACA,QAAAG,EACA,WAAAE,EACA,WAAAO,EACA,WAAAC,CACF"}